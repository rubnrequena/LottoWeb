function login_nav(a,e){$("#login-form").submit(function(a){a.preventDefault(a);var e=formControls(this),t=formLock(this);socket.sendMessage("login",e,function(a,n){formLock(t,!1);var o=$("#recordar").prop("checked");o?storage.setItem("loto_cmlogin",JSON.stringify(e)):storage.removeItem("loto_cmlogin")})})}function inicio_nav(a,e){function t(a){a.preventDefault(a);var e=$(this).attr("pago"),n=findBy("balID",e,$balance),o=0;$balance.forEach(function(a){0==a.cdo&&o++}),o<=3?askme("PROCESAR PAGO #"+e,jsrender($("#rd-procesar-pago"),n),{ok:function(a){var e=-1*parseFloat(a.monto),o={desc:"PAGO:"+a.id+" B:"+padding(a.origen,4)+"-"+padding(a.destino,4)+" R:"+a.recibo+" F:"+a.fecha,monto:e,resID:n.resID};return socket.sendMessage("balance-pago",o,function(a,e){e.balance="--",$balance.unshift(e),$("#reporte-body").html(jsrender($("#rd-reporte-us"),$balance)),$(".bl-pagar").click(t),notificacion("PAGO ENVIADO EXITOSAMENTE")}),!0}}):notificacion("LIMITE DE PAGOS ALCANZADO","Estimado usuario, ya has alcanzado el limite de pagos sin confirmar, comuniquese con su administrador.")}var n,o=copyTo(_helpers);if(o.ganador=function(a){var e=findBy("id",a,$elementos);return e?"#"+e.n+" "+e.d:""},nav.paginas.addListener(Navegador.EXIT,function(a,e){nav.paginas.removeListener(Navegador.EXIT,arguments.callee),"inicio"==e&&(activo=!1)}),$("#btnload").click(function(){function a(a){a=a||(new Date).format(),socket.sendMessage("inicio",{fecha:a},function(a,e){if($("#srt_dia").html(""),e.hasOwnProperty("code"));else{n=e.data;for(var t=0,r=0,s=0,i=0;i<n.length;i++)t+=n[i].jugado,r+=n[i].premios,s+=n[i].pago;n.push({sorteoID:"",sorteo:"TOTAL",jugado:t,premios:r,pago:s}),$("#srt_dia").html(jsrender($("#rd-sorteos-dia2-row"),e.data,o))}$("#str-dia-stamp").html(new Date(e.time).format("hh:MM TT"))})}$("#inicio-sorteodia").html(jsrender($("#rd-pnlsorteo"),null)),$(".date").datepicker({dateFormat:"yy-mm-dd"}),$(".now").datepicker("setDate",new Date),$("#reporte-fecha1").change(function(e){var t=$(this).val();a(t)});var e=!1;$("#prm-col").click(function(a){a.preventDefault(a),e=!e,$(this).find("a").html(e?"PREMIOS</br>PAGADOS":"PREMIOS</br>A PAGAR"),e?$("#srt_dia").html(jsrender($("#rd-sorteos-dia1-row"),n,o)):$("#srt_dia").html(jsrender($("#rd-sorteos-dia2-row"),n,o))}),$elementos?a():socket.sendMessage("elementos",null,function(e,t){$elementos=t,a()})}),$balance){$("#reporte-body").html(jsrender($("#rd-reporte-us"),$balance));for(var r=0;r<$balance.length;r++)if(1==$balance[r].c){$("#bl-my-total").html($balance[r].balance.format(2));break}$(".bl-pagar").click(t)}}function suspendido_nav(a,e){var t=$("#suspDetalle"),n=$("#suspPayBtn");if(e.hasOwnProperty("info")){var o=e.info.balance;t.html("Tiene una deuda pendiente de <b>"+o+"</b>");var r=e.info;function s(){askme("PROCESAR PAGO #"+r.balID,jsrender($("#rd-procesar-pago"),r),{ok:function(a){var e=-1*parseFloat(a.monto),t={desc:"PAGO:"+a.id+" B:"+padding(a.origen,4)+"-"+padding(a.destino,4)+" R:"+a.recibo+" F:"+a.fecha,monto:e,resID:r.resID};return n.prop("disabled",!0),socket.sendMessage("balance-pago",t,function(a,e){notificacion("PAGO PROCESADO",e.msg+'<br/><button class="btn btn-success btn-xs btn-block" onclick="location.reload();">Refrescar</button>',null,!0)}),!0}})}n.removeClass("hidden"),n.click(s)}else n.style("visible","none")}function suspendidoPago_nav(a,e){}function sorteoMonitor_nav(){function a(a){socket.sendMessage("sorteos",{fecha:a},function(a,e){var t=$("#ssorteos");t.html(jsrender($("#rd-sorteo-option"),e)),t.select2("val","")})}var e,t=new Date;a(t.format()),$("#ord-num-num").click(function(a){a.preventDefault(a),$(".order-num").removeClass("btn btn-primary btn-sm"),$(this).addClass("btn btn-primary btn-sm"),e.n.sort(function(a,e){return a.numero-e.numero}),$("#numeros-body").html(jsrender($("#rd-vtnum-row"),e.n))}),$("#ord-num-jg").click(function(a){a.preventDefault(a),$(".order-num").removeClass("btn btn-primary btn-sm"),$(this).addClass("btn btn-primary btn-sm"),e.n.sort(function(a,e){return e.jugada-a.jugada}),$("#numeros-body").html(jsrender($("#rd-vtnum-row"),e.n))}),$("#ord-num-gb").click(function(a){a.preventDefault(a),$(".order-num").removeClass("btn btn-primary btn-sm"),$(this).addClass("btn btn-primary btn-sm"),e.n.sort(function(a,e){return e.glb-a.glb}),$("#numeros-body").html(jsrender($("#rd-vtnum-row"),e.n))}),$("#monitor-form").submit(function(a){a.preventDefault(a),$("#ventas-body").html(""),$("#numeros-body").html(""),$(".reset").html("--");var t=formControls(this);if(t.sorteoID){var n=formLock(this);socket.sendMessage("monitor",t,function(a,t){if(formLock(n,!1),null!=t.t&&null!=t.n){e=t;var o=new Date;if($("#ultact").html(o.format("dd/mm/yy hh:MM:ss TT")),e.t&&e.n){var r=0,s=0,i=e.t[0];e.t.forEach(function(a){r+=a.jugada,a.jugada>i.jugada&&(i=a)}),$("#jugada").html(r.format(2)),$("#bnLider").html(i.banca),$("#bnLider-jg").html(i.jugada.format(2)),i=e.n[0],e.n.forEach(function(a){s+=a.glb}),e.n.forEach(function(a){a.pcj=100*a.jugada/r,a.pcg=100*a.glb/s,a.jugada>i.jugada&&(i=a)}),$("#numLider").html(i.desc),$("#numLider-jg").html(i.jugada.format(2)),$("#ventas-body").html(jsrender($("#rd-ventas-row"),e.t)),$("#numeros-body").html(jsrender($("#rd-vtnum-row"),e.n))}}else notificacion("NO HAY VENTAS REGISTRADAS PARA ESTE SORTEO")})}else notificacion("SELECCIONE UN SORTEO VALIDO")}),$("#sfecha").on("change",function(e){a(e.target.value)})}function sorteoBuscar_nav(a,e){$("#sorteo-buscar").submit(function(a){a.preventDefault(a);var e=formControls(this),t=formLock(this);socket.sendMessage("sorteos",e,function(a,e){formLock(t,!1),$("#sorteos-body").html(jsrender($("#rd-sorteo-row"),e||[]))})})}function sorteoPublicar_nav(a,e){function t(a,e){s=e||[],n()}function n(){$("#tb-sorteos").html(jsrender($("#rd-srt-row"),s,c));var a=$(".toggle");a.each(function(a){var e=$(this);e.toggles({text:{on:"SI",off:"NO"},on:e.data("activa"),click:!0})}),a.on("toggle",function(a,e){var t=$(a.target).data("target"),n=findBy("ID",t,s);socket.sendMessage("pb_editar",{id:n.ID,publico:e,bancaID:l.val()},function(a,t){n.publico=e})}),$(".tqsrt_rem").on("click",o)}function o(a){var e=parseInt($(a.target).attr("sid"));socket.sendMessage("pb_remover",{id:e,bancaID:l.val()},function(a,t){var o=findIndex("ID",e,s);s.splice(o,1),n()})}function r(a,e){f.html(""),i=e||[],i.unshift({taquillaID:0,nombre:"TODAS"}),u.html(jsrender($("#rd-taquilla-option"),i)),socket.sendMessage("sorteos-publicos",{bancaID:l.val()},t)}var s,i,c={taq:function(a){if(a>0){var e=findBy("taquillaID",a,i);return e?e.nombre:"ERROR: TAQ NO ENCONTRADA, ID:"+a}return"TODAS"},srt:function(a){return findBy("sorteoID",a,$sorteos)}},l=$("#bancas"),u=$("#taquillas"),d=$("#sorteos"),f=$("#hb-taquilla");l.html(jsrender($("#rd-banca-option"),$bancas)),l.select2("val",0),l.on("change",function(){f.html('<i class="fa fa-spinner fa-spin"></i> Espere, recibiendo taquillas..'),socket.sendMessage("taquillas",{bancaID:l.val()},r)}),d.html(jsrender($("#rd-sorteos-option"),$sorteos)),$("#reporte").submit(function(a){a.preventDefault(a);var e=formControls(this);e.bancaID=l.val(),e.hasOwnProperty("taquillas")||(e.taquillas=[0]);var n,o,r=[];for(n=e.taquillas.length-1;n>=0;n--)for(o=s.length-1;o>=0;o--)e.taquillas[n]==s[o].taquilla&&e.sorteo==s[o].sorteo&&r.push(s[o].ID);r.length>0?(notificacion("REGISTROS DUPLICADOS, POR FAVOR VERIFIQUE"),r.forEach(function(a,e){$("#r"+a).addClass("danger")})):socket.sendMessage("publicar",e,function(a,e){socket.sendMessage("sorteos-publicos",{bancaID:l.val()},t)})}),socket.sendMessage("taquillas",{bancaID:l.val()},r)}function sorteoPremiar_nav(a,e){function t(a){socket.sendMessage("sorteos",{fecha:a},function(a,e){o=e||[];var t=$("#premiar-sorteo");t.html(jsrender(i,o)),t.select2("val","")})}function n(a){var e=findBy("sorteoID",a,o);s.html(jsrender(c,exploreBy("s",e.sorteo,$elementos)))}var o,r=$("#premiar-sorteo"),s=$("#premiar-numero"),i=$("#rd-sorteo-option"),c=$("#rd-elemento-option");$(".date").on("change",function(a){t(a.target.value)}),r.on("change",function(){n(r.val())}),$("#premiar-form").submit(function(a){a.preventDefault(a);var e=formControls(this),t=formLock(this);socket.sendMessage("sorteo-premiar",e,function(a,n){formLock(t,!1),1==n.code?notificacion("SOLICITUD ACEPTADA","SORTEO PREMIADO, Gracias por su tiempo..."):0==n.code?notificacion("SOLICITUD ACEPTADA","Gracias por su tiempo..."):4==n.code?notificacion("SORTEOS","SORTEO #"+e.sorteoID+" YA ESTA PREMIADO","growl-danger"):5==n.code?notificacion("SOLICITUD RECHAZADA"," SORTEO #"+e.sorteoID+" SOLICITUD DUPLICADA","growl-danger"):8==n.code&&notificacion("SOLICITUD RECHAZADA"," SORTEO #"+e.sorteoID+" SORTEO ABIERTO","growl-danger")})});var l=(new Date).format();$elementos?t(l):socket.sendMessage("elementos",null,function(a,e){$elementos=e,t(l)})}function bancasBancas_nav(a,e){function t(){$("#bancas-body").html(jsrender($("#rd-banca-row"),$bancas));var a=$(".toggle");a.each(function(a){var e=$(this);e.toggles({text:{on:"SI",off:"NO"},on:e.data("activa"),click:!0})}),$(".btgl").on("toggle",function(a,e){var t=$(a.target).data("target"),n=findBy("usuarioID",t,$bancas);e=1==e?3:0,socket.sendMessage("usuario-editar",{usuarioID:n.usuarioID,activo:e},function(a,e){1==e.code?(e.hasOwnProperty("activa")&&(n.activo=e.activo),e.hasOwnProperty("nombre")&&(n.nombre=e.nombre),e.hasOwnProperty("clave")&&(n.clave=e.clave)):alert("ERROR AL MODIFICAR ESTADO ACTIVO DE BANCA")})});var e=$(".password");e.on("mouseover",function(a){$(a.target).html($(a.target).data("clave"))}),e.on("mouseout",function(a){$(a.target).html("***")}),$(".bn-remove-req").click(function(a){a.preventDefault(a);var e=$(this).attr("bancaID"),n=confirm("Seguro desea eliminar esta banca? Tenga en cuenta que enviara a la papelera todas las taquillas asociadas.");return!0===n&&socket.sendMessage("banca-remover",{bancaID:e,papelera:1},function(a,n){if(1==n.code){var o=findBy("bancaID",e,$bancas);o.papelera=1,t()}}),!1}),$(".bn-remove-res").click(function(a){a.preventDefault(a);var e=$(this).attr("bancaID"),n=confirm("Seguro desea restaurar esta banca?  Tenga en cuenta que restaurara todas las taquillas asociadas.");return!0===n&&socket.sendMessage("banca-remover",{bancaID:e,papelera:0},function(a,n){if(1==n.code){var o=findBy("bancaID",e,$bancas);o.papelera=0,t()}}),!1})}var n=$("#papelera");n.change(function(){t()}),$("#banca-nueva").submit(function(a){a.preventDefault(a);var e=formControls(this);e.comision=e.comision/100,e.participacion=e.participacion/100,e.renta=$usuario.renta,$("#alquiler").is(":checked")&&(e.comision=-1*e.comision);var n=formLock(this);socket.sendMessage("usuario-nuevo",e,function(a,o){o>0?(formReset(n),e.usuarioID=o,e.renta=$usuario.renta,$bancas.push(e),t(),notificacion("BANCA NUEVA","Banca registrada exitosamente")):(formLock(n,!1),notificacion("ERROR","Banca no registrada, usuario duplicado","growl-danger"))})}),t()}function bancasBanca_nav(a,e){if(e&&1==e.length){var t,n,o=$("#banca-nueva"),r=$("#banca-psw"),s=$("#banca-renta"),i=$("#papelera");i.change(function(){u()}),o.submit(function(a){a.preventDefault(a);var e=formControls(this);e.usuarioID=t.usuarioID,e.comision=e.comision/100,$("#alquiler").is(":checked")&&(e.comision=-1*e.comision),e.participacion=e.participacion/100,e.renta=t.renta,formLock(this),socket.sendMessage("usuario-editar",e,function(a,n){formLock(o[0],!1),1==n.code?(notificacion("Cambios guardados con exito"),t.activa=e.activa,t.nombre=e.nombre,t.comision=e.comision,t.usuario=e.usuario,t.clave=e.clave):notificacion("Error al realizar cambios","","growl-danger")})});var c,l=0;function u(){var a=i.prop("checked");n.sort(function(a,e){return a.papelera<e.papelera?-1:a.papelera>e.papelera?1:a.activa<e.activa?1:a.activa>e.activa?-1:a.taquillaID-e.taquillaID}),$("#grupos-body").html(jsrender($("#rd-grupo-row"),n.filter(function(e){return a==e.papelera})));var e=$(".password");e.on("mouseover",function(a){$(a.target).html($(a.target).data("clave"))}),e.on("mouseout",function(a){$(a.target).html("***")});var t=$(".toggle");t.each(function(a){var e=$(this);e.toggles({text:{on:"SI",off:"NO"},on:e.data("activa"),click:!0})}),$(".btgl").on("toggle",function(a,e){var t=$(a.target).data("target"),o=findBy("bancaID",t,n);socket.sendMessage("banca-editar",{bancaID:o.bancaID,activa:e},function(a,e){1==e.code?e.hasOwnProperty("activa")&&(o.activa=e.activa):alert("ERROR AL MODIFICAR ESTADO ACTIVO DE GRUPO")})}),$(".bn-remove-req").click(function(a){a.preventDefault(a);var e=$(this).attr("bancaID"),t=confirm("Seguro desea eliminar esta banca? Tenga en cuenta que enviara a la papelera todas las taquillas asociadas.");return!0===t&&socket.sendMessage("banca-remover",{bancaID:e,papelera:1},function(a,t){if(1==t.code){var o=findBy("bancaID",e,n);o.papelera=1,u()}}),!1}),$(".bn-remove-res").click(function(a){a.preventDefault(a);var e=$(this).attr("bancaID"),t=confirm("Seguro desea restaurar este grupo?  Tenga en cuenta que restaurara todas las taquillas asociadas.");return!0===t&&socket.sendMessage("banca-remover",{bancaID:e,papelera:0},function(a,t){if(1==t.code){var o=findBy("bancaID",e,n);o.papelera=0,u()}}),!1})}$("#grupo-nuevo").submit(function(a){a.preventDefault(a);var e=formControls(this);e.usuarioID=t.usuarioID,e.renta=$usuario.renta,e.comision=e.comision*l;var o=formLock(this);socket.sendMessage("banca-nueva",e,function(a,t){t>0?(formReset(o),e.bancaID=t,e.papelera=0,n.push(e),u(),notificacion("BANCA NUEVA","Banca registrada exitosamente")):(formLock(o,!1),notificacion("ERROR","Banca no registrada, usuario duplicado","growl-danger"))})}),s.submit(function(a){a.preventDefault(a);var e=formControls(this);e.bancaID=t.bancaID,e.renta=e.renta/100,formLock(this),socket.sendMessage("banca-editar",e,function(a,e){formLock(s[0],!1),1==e?notificacion("Cambios guardados con exito"):notificacion("Error al realizar cambios","","growl-danger")})}),r.submit(function(a){a.preventDefault(a),formLock(this);var e=formControls(this);e.usuarioID=t.usuarioID,socket.sendMessage("banca-editar",e,function(a,e){formReset(r[0]),1==e.code?(notificacion("Cambio de clave exitoso"),e.hasOwnProperty("clave")&&(t.clave=e.clave)):notificacion("Cambio de clave fallido","","growl-danger")})}),$(".rdo-com").change(function(){l=this.value,$("#gr-comision").prop("disabled",0==this.value)}),t=findBy("usuarioID",e[0],$bancas),t.comision<0&&$("#alquiler").prop("checked",1),formSet(o,t,function(a,e){return"comision"==e||"participacion"==e||"renta"==e?Math.abs(100*a):!1===a?0:!0===a?1:a}),socket.sendMessage("usuario-grupos",{usuarioID:t.usuarioID},function(a,e){n=e||[],u()});var d=$("#sorteo"),f=$("#com-form"),m=$("#com-tbody");d.html(jsrender($("#rd-sorteos-option"),$sorteos)),d.select2("val",0),d.trigger("change");var p=copyTo(_helpers);function v(){m.html("Cargando..."),socket.sendMessage("taquilla-comisiones",{bancaID:t.usuarioID},function(a,e){c=e||{},e?(m.html(jsrender($("#rd-com-row"),e||{},p)),$(".comDL").click(function(a){a.preventDefault(a);var e=parseInt($(this).attr("comID"));socket.sendMessage("taquilla-comision-dl",{comID:e},function(a,e){v()})})):m.html("")})}p.sorteo=function(a){return findBy("sorteoID",a,$sorteos).nombre},f.submit(function(a){a.preventDefault(a);var e=formControls(this);e.bancaID=t.usuarioID,findBy("sorteo",e.sorteo,c)?notificacion("VALOR DUPLICADO","El sorteo que esta intentando modificar ya existe, remueva el valor existente y vuelva a intentarlo."):socket.sendMessage("taquilla-comision-nv",e,function(a,e){v()})}),v()}else nav.nav("406")}function bancasPermisos_nav(a,e){function t(){$("#permisos-table").html(jsrender($("#rd-permiso-row"),n,r)),$(".permiso-remover").click(function(a){a.preventDefault(a);var e=$(this).attr("metaID");socket.sendMessage("permiso-remove",{meta:e},function(a,o){if(o>0){var r=findIndex("metaID",e,n);n.splice(r,1),t(),notificacion("PERMISO REMOVIDO EXITOSO","","growl-success")}else notificacion("ERROR AL REMOVER PERMISO","","growl-danger")})});var a=$(".toggle");a.each(function(a){var e=$(this);e.toggles({text:{on:"SI",off:"NO"},on:e.data("activa"),click:e.data("click")})}),a.on("toggle",function(a,e){var t=$(a.target).data("target");socket.sendMessage("permiso-update",{meta:t,valor:e},function(a,e){e>0?notificacion("CAMBIO DE PERMISO EXITOSO","","growl-success"):notificacion("ERROR AL CAMBIAR PERMISO","","growl-danger")})})}var n,o=["PUBLICAR SORTEOS","ACCEDER A TAQUILLAS","ACTIVAR TAQUILLAS","ACCEDER A TOPES","TAQUILLAS ACTIVADAS","TOPE GRUPO"],r={permiso:function(a){return o[a-1]}},s=$bancas.slice();s.unshift({bancaID:0,nombre:"TODAS"}),$("#bancas").html(jsrender($("#rd-banca-option"),s)),$("#permisos").submit(function(a){a.preventDefault(a);var e=formControls(this);e.hasOwnProperty("permisos")?socket.sendMessage("permiso-nuevo",e,function(a,e){$("#permisos-table").html(""),socket.sendMessage("permisos",null,function(a,e){n=e||[],t()})}):notificacion("SELECCIONE AL MENOS UN PERMISO","","growl-danger")}),socket.sendMessage("permisos",null,function(a,e){n=e||[],t()})}function bancasGrupo_nav(a,e){if(e&&1==e.length){var t,n,o=$("#banca-nueva"),r=$("#banca-psw"),s=$("#banca-renta"),i=$("#papelera");function c(){var a=i.prop("checked");n.sort(function(a,e){return a.papelera<e.papelera?-1:a.papelera>e.papelera?1:a.activa<e.activa?1:a.activa>e.activa?-1:a.taquillaID-e.taquillaID}),$("#taquillas-body").html(jsrender($("#rd-taquilla-row"),n.filter(function(e){return a==e.papelera})));var e=$(".password");e.on("mouseover",function(a){$(a.target).html($(a.target).data("clave"))}),e.on("mouseout",function(a){$(a.target).html("***")});var o=$(".activart");o.each(function(a){var e=$(this);e.toggles({text:{on:"SI",off:"NO"},on:e.data("activa"),click:1})}),o.on("toggle",function(a,e){var t=$(a.target).data("target"),o=findBy("taquillaID",t,n);socket.sendMessage("taquilla-editar",{taquillaID:o.taquillaID,activa:e},function(a,t){1===t?o.activa=e:alert("ERROR AL MODIFICAR ESTADO ACTIVO DE TAQUILLA")})});var r=$(".fingerlock");r.each(function(a){var e=$(this);e.toggles({text:{on:"SI",off:"NO"},on:e.data("activa"),click:!0})}),r.on("toggle",function(a,e){var t=$(a.target).data("target"),o=findBy("taquillaID",t,n);socket.sendMessage("taquilla-flock",{taquillaID:o.taquillaID,usuarioID:o.usuarioID,activa:e},function(a,t){1===t.ok?o.fingerlock=e:alert("ERROR AL MODIFICAR VALIDACION DE HUELLA")})}),$(".fingerclear").click(function(a){a.preventDefault(a);var e=$(a.currentTarget),n=parseInt(e.attr("val"));socket.sendMessage("taquilla-fpclear",{taquillaID:n,usuarioID:t.usuarioID},function(a,t){1===t.ok?e.parent().html('<i class="fa fa-shield"></i>'):alert("ERROR AL MODIFICAR HUELLA DEL TAQUILLA")})}),$(".bn-remove-req").click(function(a){a.preventDefault(a);var e=$(this).attr("taqID"),t=confirm("Seguro desea eliminar esta taquilla?");return!0===t&&socket.sendMessage("taquilla-remover",{taquillaID:e,papelera:1},function(a,t){if(1==t.code){var o=findBy("taquillaID",e,n);o.papelera=1,c()}}),!1}),$(".bn-remove-res").click(function(a){a.preventDefault(a);var e=$(this).attr("taqID");return socket.sendMessage("taquilla-remover",{taquillaID:e,papelera:0},function(a,t){if(1==t.code){var o=findBy("taquillaID",e,n);o.papelera=0,c()}}),!1})}i.change(function(){c()}),o.submit(function(a){a.preventDefault(a);var e=formControls(this);e.bancaID=t.bancaID,e.comision=e.comision/100,$("#alquiler").is(":checked")&&(e.comision=-1*e.comision),formLock(this),socket.sendMessage("banca-editar",e,function(a,e){formLock(o[0],!1),1==e.code?(notificacion("Cambios guardados con exito"),e.hasOwnProperty("activa")&&(t.activa=e.activa),e.hasOwnProperty("nombre")&&(t.nombre=e.nombre),e.hasOwnProperty("comision")&&(t.comision=e.comision),e.hasOwnProperty("usuario")&&(t.usuario=e.usuario)):notificacion("Error al realizar cambios","","growl-danger")})}),s.submit(function(a){a.preventDefault(a);var e=formControls(this);e.bancaID=t.bancaID,e.renta=e.renta/100,formLock(this),socket.sendMessage("banca-editar",e,function(a,e){formLock(s[0],!1),1==e?notificacion("Cambios guardados con exito"):notificacion("Error al realizar cambios","","growl-danger")})}),r.submit(function(a){a.preventDefault(a),formLock(this);var e=formControls(this);e.bancaID=t.bancaID,socket.sendMessage("banca-editar",e,function(a,e){formReset(r[0]),1==e.code?(notificacion("Cambio de clave exitoso"),e.hasOwnProperty("clave")&&(t.clave=e.clave)):notificacion("Cambio de clave fallido","","growl-danger")})}),$(".rdo-com").change(function(){this.value,$("#bn-comision").prop("disabled",0==this.value)}),socket.sendMessage("banca-grupo",{bancaID:e[0]},function(a,e){t=e,formSet(o,t,function(a,e){return"comision"==e?Math.abs(100*a):!1===a?0:!0===a?1:a}),t.comision<0&&$("#alquiler").prop("checked",1),0==t.comision?$("#radioNormal").prop("checked",!0):t.comision>0?$("#radioRecogedor").trigger("click"):t.comision<0&&$("#radioReventa").trigger("click"),socket.sendMessage("taquillas",{bancaID:t.bancaID,usuarioID:t.usuarioID},function(a,e){n=e||[],c(),v()})}),$("#taquilla-nueva").submit(function(a){a.preventDefault(a);var e=formControls(this);e.bancaID=t.bancaID,e.usuarioID=t.usuarioID;var o=formLock(this);socket.sendMessage("taquilla-nueva",e,function(a,t){t.hasOwnProperty("code")?(formLock(o,!1),notificacion("DISCULPE: USUARIO NO DISPONIBLE","El usuario que esta asignando a la taquilla, ya esta en uso intente con uno distinto.","growl-danger")):(formReset(o),e.taquillaID=t,e.papelera=0,e.fingerlock=!0,e.fingerprint=null,n.push(e),c())})});var l,u=$("#rem-taqinactivas");u.click(function(){function a(s){r.html(e+"/"+t.length),socket.sendMessage("taquilla-remover",{taquillaID:s,papelera:1},function(i,l){1==l.code&&(o=findBy("taquillaID",s,n),o.papelera=1,++e<t.length?a(t[e].taquillaID):(c(),r.html(""),u.prop("disabled",0)))})}var e=0,t=n.exploreBy("activa",0).exploreBy("papelera",0);if(0!=t.length){u.prop("disabled",1);var o,r=$("#rem-tqinc"),s=confirm("Confirma desea remover todas las taquillas inactivas?");!0===s&&a(t[e].taquillaID)}});var d=$("#sorteo"),f=$("#com-form"),m=$("#com-tbody");d.html(jsrender($("#rd-sorteos-option"),$sorteos)),d.select2("val",0),d.trigger("change");var p=copyTo(_helpers);function v(){m.html("Cargando..."),socket.sendMessage("taquilla-comisiones",{grupoID:t.bancaID,bancaID:t.usuarioID},function(a,e){l=e||{},e?(m.html(jsrender($("#rd-com-row"),e||{},p)),$(".comDL").click(function(a){a.preventDefault(a);var e=parseInt($(this).attr("comID"));socket.sendMessage("taquilla-comision-dl",{comID:e},function(a,e){v()})})):m.html("")})}p.sorteo=function(a){return findBy("sorteoID",a,$sorteos).nombre},f.submit(function(a){a.preventDefault(a);var e=formControls(this);e.grupoID=t.bancaID,e.bancaID=t.usuarioID,findBy("sorteo",e.sorteo,l)?notificacion("VALOR DUPLICADO","El sorteo que esta intentando modificar ya existe, remueva el valor existente y vuelva a intentarlo."):socket.sendMessage("grupo-comision-nv",e,function(a,e){v()})})}else nav.nav("406")}function bancasTaquilla_nav(a,e){var t,n=$("#remover");if(e&&1==e.length){var o;socket.sendMessage("taquillas",{id:e[0]},function(a,e){e?(t=e[0],formSet($("#taquilla-nueva"),t),l()):nav.nav("406")}),$("#taquilla-nueva").submit(function(a){a.preventDefault(a);var e=formControls(this);e.taquillaID=t.taquillaID;var n=formLock(this);socket.sendMessage("taquilla-editar",e,function(a,e){formLock(n,!1),1==e?(notificacion("TAQUILLA","CAMBIOS REALIZADOS EXITOSAMENTE","growl-success"),$taquillas=null):notificacion("DISCULPE: USUARIO NO DISPONIBLE","","growl-danger")})}),$("#cambiar-clave").submit(function(a){a.preventDefault(a);var e=formControls(this);e.taquillaID=t.taquillaID;var n=formLock(this);socket.sendMessage("taquilla-editar",e,function(a,e){formLock(n,!1),1==e?(notificacion("TAQUILLA","CAMBIO DE CLAVE EXITOSO","growl-success"),$taquillas=null):notificacion("CAMPOS INVALIDOS","<p>CAMBIO DE CLAVE FALLIDO</p>","growl-danger")})}),n.click(function(){n.prop("disabled",!0),n.html('<i class="fa fa-spinner fa-spin"></i> ESPERE, ESTO PUEDE TOMAR UN MOMENTO...'),socket.sendMessage("taquilla-remover",{taquillaID:t.taquillaID,usuarioID:t.usuarioID,papelera:1},function(a,e){if($taquillas&&$taquillas.length>0){var n=findIndex("taquillaID",t.taquillaID,$taquillas);$taquillas.splice(n,1)}nav.back()})});var r=$("#sorteo"),s=$("#com-form"),i=$("#com-tbody");r.html(jsrender($("#rd-sorteos-option"),$sorteos)),r.select2("val",0),r.trigger("change");var c=copyTo(_helpers);function l(){i.html("Cargando..."),socket.sendMessage("taquilla-comisiones",{taquillaID:t.taquillaID},function(a,e){o=e||{},e?(i.html(jsrender($("#rd-com-row"),e||{},c)),$(".comDL").click(function(a){a.preventDefault(a);var e=parseInt($(this).attr("comID"));socket.sendMessage("taquilla-comision-dl",{comID:e},function(a,e){l()})})):i.html("")})}c.sorteo=function(a){return findBy("sorteoID",a,$sorteos).nombre},s.submit(function(a){a.preventDefault(a);var e=formControls(this);e.taquillaID=t.taquillaID,findBy("sorteo",e.sorteo,o)?notificacion("VALOR DUPLICADO","El sorteo que esta intentando modificar ya existe, remueva el valor existente y vuelva a intentarlo."):socket.sendMessage("taquilla-comision-nv",e,function(a,e){l()})})}}function bancasTransferir_nav(a,e){function t(a,e){o.html(jsrender($("#rd-grupo-option"),e)),o.select2("val",0)}var n=$(".bnc"),o=($("#taquilla"),$("#trf-grupo"));n.html(jsrender($("#rd-usuario-option"),$bancas));var r=$("#sreporte"),s=$("#desdebnc");s.select2("val",""),s.on("change",function(a){var e=$(this).val();socket.sendMessage("usuario-grupos",{usuarioID:e},t)}),$("#trf-grupo-form").submit(function(a){a.preventDefault(a);var e=formControls(this);s.val()==e.uID?notificacion("ASISTENTE","La banca de origen debe ser diferente a la banca destino"):socket.sendMessage("transferir-grupo",e,function(a,e){if(e>0){var t="- Grupo transferida con exito.";notificacion("TRANSFERENCIA EXITOSA",t)}else notificacion("TRANFERENCIA FALLIDA","Comuniquese con el administrador")})}),$("#tranferir").submit(function(a){a.preventDefault(a);var e=formControls(this);e.desde==e.hasta?notificacion("ASISTENTE","La banca de origen debe ser diferente a la banca destino"):socket.sendMessage("transferir",{taq:e,vnt:r.is(":checked")},function(a,e){if(e>0){var t="- Agencia transferida con exito.";2==e&&(t+="</br>- Ventas y reportes transferidos con exito."),notificacion("TRANSFERENCIA EXITOSA",t)}else notificacion("TRANFERENCIA FALLIDA","Comuniquese con el administrador")})})}function bancasTopes_nav(a,e){function t(a,e){if(e.hasOwnProperty("message"))return notificacion(e.message);e.forEach(function(a){a.sorteo>0&&(a.nsorteo=findBy("sorteoID",a.sorteo,$sorteos).nombre)}),$("#topes-body").html(jsrender($("#rd-topes-row"),e||[],v)),$(".tope-rem").click(function(a){if(a.preventDefault(a),confirm("Seguro desea remover tope?")){var e=$(this),t={};t.topeID=parseInt(e.attr("topeID")),t.taquillaID=parseInt(e.attr("taquillaID")),t.bancaID=parseInt(e.attr("bancaID")),socket.sendMessage("tope-remover",t,function(a,e){$("#tope"+t.topeID).remove()})}})}function n(a){a||($("#hlp-sorteos").html("<i>No hay sorteos disponibles para este dia.</i>"),a=[]),a=a.filter(function(a){return a.sorteo==o.val()}),a.unshift({sorteoID:0,descripcion:"TODOS"}),s.html(jsrender($("#rd-sorteo-option"),a)),s.select2("val",0),$("#hlp-sorteos").html("")}var o=$("#sorteo"),r=$("#taquilla"),s=$("#sorteos"),i=$("#grupos"),c=$("#bancas"),l=$("#elemento"),u=$("#monto"),d=$("#sorteo-fecha"),f=$bancas.slice();f.unshift({bancaID:0,nombre:""}),c.html(jsrender($("#rd-usuario-option"),f)),c.select2("val",""),c.on("change",function(){socket.sendMessage("topes",{usuarioID:c.val()},function(a,e){t(a,e),socket.sendMessage("usuario-grupos",{usuarioID:c.val()},function(a,e){e=e||[],e.unshift({bancaID:0,nombre:"TODOS"}),i.html(jsrender($("#rd-banca-option"),e)),i.select2("val",0)})})}),i.on("change",function(){var a={usuarioID:c.val()};i.val()>0&&(a.bancaID=i.val()),socket.sendMessage("topes",a,function(a,e){t(a,e),socket.sendMessage("taquillas",{banca:c.val()},function(a,e){r.html(jsrender($("#rd-taquilla-option"),e))})})});var m=$sorteos.slice();m.unshift({sorteoID:0,nombre:"TODOS"}),o.html(jsrender($("#rd-sorteos-option"),m)),o.on("change",function(){var a=o.val(),e=exploreBy("s",a,$elementos);e.unshift({id:0,d:"TODOS"}),l.html(jsrender($("#rd-elemento-option"),e)),l.select2("val",0),n(p)}),o.select2("val",0),o.trigger("change");var p,v={elm:function(a){if(0==a)return"TODAS";var e=findBy("id",a,$elementos);return e?"#"+e.n+" "+e.d:""},srt:function(a){return 0==a?"TODOS":'<a href="#sorteo|'+a+'">#'+padding(a,5)+"</a>"}};d.change(function(a){var e=$(a.target).val();$("#hlp-sorteos").html('<i class="fa fa-spinner fa-spin"></i> Espere, recibiendo sorteos...</i>'),socket.sendMessage("sorteos",{fecha:e},function(a,e){p=e||[],n(p)})}),$("#tope-nuevo").submit(function(a){a.preventDefault(a);var e=formControls(this);e.bancaID=i.val(),e.usuarioID=c.val();var n=formLock(this);socket.sendMessage("tope-nuevo",e,function(a,e){if(formLock(n,!1),e.error)return notificacion(e.error);u.val(""),socket.sendMessage("topes",{usuarioID:c.val(),bancaID:i.val()},t)})}),d.trigger("change")}function reporteGeneral_nav(a,e){function t(){if(0!=r.length){var a=0,e=0,t=0,o=0,c=0;r.forEach(function(t){t.balance=t.jg-t.pr-t.cm-t.prt,t.rango=s[0].value+"|"+i[0].value,c+=t.balance,a+=t.jg,e+=t.pr,o+=t.cm});var l={j:a.format(2),pr:e.format(2),b:c.format(2),cm:o.format(2)};$("#bheader").html(jsrender($("#rd-total"),l)),$("#mnt-jugado").html(a.format(2)),$("#mnt-premios").html(e.format(2)),$("#mnt-pagos").html(t.format(2)),$("#mnt-balance").html(c.format(2)),$("#tg-descuento").html(o.format(2)),$("#tg-comision").html(o.format(2)),$("#reporte-body").html(jsrender($("#rd-reporte"),r)),n()}}function n(){var a=document.getElementById("exportar");a.href="#reporte/general";var e=e="SRQ - REPORTE "+o.inicio+"-"+o.fin+"."+f.val();"json"==f.val()?download("exportar",JSON.stringify(r,null,2),e,"text/plain"):"csv"==f.val()?notificacion("FORMATO NO DISPONIBLE"):html2canvas($("#print-img"),{onrendered:function(t){var n=t.toDataURL("image/png");a.href=n,a.download=e}})}var o,r,s=$("#reporte-fecha1"),i=$("#reporte-fecha2"),c=$("#reporte"),l=$("#prm-select"),u=$("#rp-agrupar"),d={bn:function(){return $usuario.nombre}};$("#reporte").submit(function(a){a.preventDefault(a),o=formControls(this);var e=formLock(this);$("#pheader").html(jsrender($("#rd-prtaq"),o,d)),socket.sendMessage("reporte-general",{s:o,g:u.val()},function(a,n){formLock(e,!1),r=n||[],t()})}),l.change(t);var f=$("#formato");if(f.change(n),e&&e.length>0){var m=e[0].split("-"),p=e[1].split("-");s.datepicker("setDate",new Date(m[0],parseInt(m[1])-1,m[2])),i.datepicker("setDate",new Date(p[0],parseInt(p[1])-1,p[2])),c.trigger("submit")}}function reporteBanca_nav(e,t){function n(){if(0!=s.length){var a=0,e=0,t=0,n=0,r=0;s.forEach(function(t){t.balance=t.jg-t.pr-(t.cm||t.cmt)-t.prt,t.rango=i[0].value+"|"+c[0].value,r+=t.balance,a+=t.jg,e+=t.pr,n+=t.cm||t.cmt});var l={j:a.format(2),pr:e.format(2),b:r.format(2),cm:n.format(2)};$("#bheader").html(jsrender($("#rd-total"),l)),$("#mnt-jugado").html(a.format(2)),$("#mnt-premios").html(e.format(2)),$("#mnt-pagos").html(t.format(2)),$("#mnt-balance").html(r.format(2)),$("#tg-comision").html(n.format(2)),$("#reporte-body").html(jsrender($("#rd-reporte"),s)),o()}}function o(){var a=document.getElementById("exportar");a.href="#reporte/general";var e=e="SRQ - REPORTE "+r.inicio+"-"+r.fin+"."+m.val();"json"==m.val()?download("exportar",JSON.stringify(s,null,2),e,"text/plain"):"csv"==m.val()?notificacion("FORMATO NO DISPONIBLE"):html2canvas($("#print-img"),{onrendered:function(t){var n=t.toDataURL("image/png");a.href=n,a.download=e}})}var r,s,i=$("#reporte-fecha1"),c=$("#reporte-fecha2"),l=$("#reporte"),u=$("#prm-select"),d=$("#rp-agrupar"),f={bn:function(){return $usuario.nombre}};$("#reporte").submit(function(a){a.preventDefault(a),r=formControls(this),r.usuarioID=t[0];var e=formLock(this);$("#pheader").html(jsrender($("#rd-prtaq"),r,f)),socket.sendMessage("reporte-banca",{s:r,g:d.val()},function(a,t){formLock(e,!1),s=t||[],n()})}),
u.change(n);var m=$("#formato");m.change(o),t&&t.length>1&&(a=t[1].split("-"),b=t[2].split("-"),i.datepicker("setDate",new Date(a[0],parseInt(a[1])-1,a[2])),c.datepicker("setDate",new Date(b[0],parseInt(b[1])-1,b[2])),l.trigger("submit"))}function reporteRecogedor_nav(e,t){function n(){if(0!=s.length){var a=0,e=0,t=0,n=0,r=0,l=0;s.forEach(function(t){t.balance=t.jg-t.pr-t.cmt,t.rango=i[0].value+"|"+c[0].value,l+=t.balance,a+=t.jg,e+=t.pr,n+=t.cmt,r+=t.rt});var u,d,f={j:a.format(2),pr:e.format(2),b:l.format(2),cm:n.format(2),r:r.format(2)};$("#bheader").html(jsrender($("#rd-total"),f)),$("#mnt-jugado").html(a.format(2)),$("#mnt-premios").html(e.format(2)),$("#mnt-pagos").html(t.format(2)),$("#mnt-balance").html(l.format(2)),$("#tg-descuento").html((n+r).format(2)),$("#tg-comision").html(n.format(2)),$("#tg-renta").html(r.format(2)),u=s.slice(),u.sort(function(a,e){return e.jg-a.jg}),d=u[0],$("#tj-banca").html(d.desc),$("#tj-jugada").html(d.jg.format(2)),$("#tj-balance").html(d.balance.format(2)),u=s.slice(),u.sort(function(a,e){return e.balance-a.balance}),d=u[0],$("#tg-banca").html(d.desc),$("#tg-jugada").html(d.jg.format(2)),$("#tg-balance").html(d.balance.format(2)),$("#reporte-body").html(jsrender($("#rd-reporte"),s)),o()}}function o(){var a=document.getElementById("exportar");a.href="#reporte/general";var e=e="SRQ - REPORTE "+r.inicio+"-"+r.fin+"."+m.val();"json"==m.val()?download("exportar",JSON.stringify(s,null,2),e,"text/plain"):"csv"==m.val()?notificacion("FORMATO NO DISPONIBLE"):html2canvas($("#print-img"),{onrendered:function(t){var n=t.toDataURL("image/png");a.href=n,a.download=e}})}var r,s,i=$("#reporte-fecha1"),c=$("#reporte-fecha2"),l=$("#reporte"),u=$("#prm-select"),d=$("#rp-agrupar"),f={bn:function(){return $usuario.nombre}};$("#reporte").submit(function(a){a.preventDefault(a),r=formControls(this),r.bancaID=t[0];var e=formLock(this);$("#pheader").html(jsrender($("#rd-prtaq"),r,f)),socket.sendMessage("reporte-recogedor",{s:r,g:d.val()},function(a,t){formLock(e,!1),s=t||[],n()})}),u.change(n);var m=$("#formato");m.change(o),t&&t.length>1&&(a=t[1].split("-"),b=t[2].split("-"),i.datepicker("setDate",new Date(a[0],parseInt(a[1])-1,a[2])),c.datepicker("setDate",new Date(b[0],parseInt(b[1])-1,b[2])),l.trigger("submit"))}function reporteTaquilla_nav(a,e){function t(){$("#reporte-body").html(jsrender($("#rd-reporte"),n))}var n,o=$("#reporte-fecha1"),r=$("#reporte-fecha2"),s=$("#reporte"),i=$("#prm-select"),c=$("#hb-taquilla"),l=$("#bancas"),u=$("#grupos");if(l.html(jsrender($("#rd-usuario-option"),$bancas)),l.change(function(){c.html('<i class="fa fa-spinner fa-spin" ></i> Espere, recibiendo grupos...'),socket.sendMessage("usuario-grupos",{usuarioID:l.val()},function(a,e){$("#grupos").html(jsrender($("#rd-banca-option"),e)),c.remove()})}),l.select2("val",""),u.change(function(){c.html('<i class="fa fa-spinner fa-spin" ></i> Espere, recibiendo grupos...');var a=l.val();socket.sendMessage("taquillas",{usuarioID:a},function(a,e){$("#taquillas").html(jsrender($("#rd-taquilla-option"),e)),c.remove()})}),s.submit(function(a){a.preventDefault(a);var e=formControls(this),o=formLock(this);socket.sendMessage("reporte-taquilla",e,function(a,e){formLock(o,!1),e=e||[],n=e;var r,s,i=0,c=0,l=0,u=0;e.forEach(function(a){a.balance=a.jugada-a.premio,i+=a.jugada,c+=a.pago,l+=a.premio,u+=a.comision}),$("#mnt-jugado").html(i.format(2)),$("#mnt-premios").html(l.format(2)),$("#mnt-pagos").html(c.format(2)),$("#mnt-balance").html((i-l-u).format(2)),$("#tg-descuento").html(u.format(2)),$("#tg-comision").html(u.format(2)),r=e.slice(),r.sort(function(a,e){return e.jugada-a.jugada}),s=r[0],$("#tj-banca").html(s.descripcion),$("#tj-jugada").html(s.jugada.format(2)),$("#tj-balance").html(s.balance.format(2)),r=e.slice(),r.sort(function(a,e){return e.balance-a.balance}),s=r[0],$("#tg-banca").html(s.descripcion),$("#tg-jugada").html(s.jugada.format(2)),$("#tg-balance").html(s.balance.format(2)),t()})}),i.change(t),e&&e.length>0){var d=e[0].split("-"),f=e[1].split("-");o.datepicker("setDate",new Date(d[0],parseInt(d[1])-1,d[2])),r.datepicker("setDate",new Date(f[0],parseInt(f[1])-1,f[2]))}}function reporteGrupo_nav(a,e){function t(){if(0!=o.length){var a=0,e=0,t=0,n=0,r=0,s=0;o.forEach(function(o){o.balance=o.jugada-o.premio,s+=o.balance,a+=o.jugada,e+=o.premio,t+=o.pago,n+=o.comision,o.renta,r+=o.cmBanca});var i=r<0;i&&(r=Math.abs(r));var c,l,u={j:a.format(2),pr:e.format(2),cm:n.format(2),cmb:r.format(2)};$("#mnt-jugado").html(a.format(2)),$("#mnt-premios").html(e.format(2)),$("#mnt-pagos").html(t.format(2)),i?(u.b=(s-r-n).format(2),$("#mnt-balance").html((s-r-n).format(2)),$("#tg-descuento").html(Math.abs(r+n).format(2))):(u.b=(s-(r||n)).format(2),$("#mnt-balance").html((s-(r||n)).format(2)),$("#tg-descuento").html(Math.abs(r-n).format(2))),$("#tg-comision").html(n.format(2)),$("#tg-comisionBanca").html(r.format(2)),c=o.slice(),c.sort(function(a,e){return e.jugada-a.jugada}),l=c[0],$("#tj-banca").html(l.desc),$("#tj-jugada").html(l.jugada.format(2)),$("#tj-balance").html(l.balance.format(2)),c=o.slice(),c.sort(function(a,e){return e.balance-a.balance}),l=c[0],$("#tg-banca").html(l.desc),$("#tg-jugada").html(l.jugada.format(2)),$("#tg-balance").html(l.balance.format(2)),$("#bheader").html(jsrender($("#rd-total"),u)),$("#reporte-body").html(jsrender($("#rd-reporte2"),o))}}var n=$("#bancas");n.html(jsrender($("#rd-banca-option"),$bancas));var o,r=$("#reporte-fecha1"),s=$("#reporte-fecha2"),i=$("#reporte"),c=$("#rp-agrupar"),l={bn:function(){return $usuario.nombre}};if($("#reporte").submit(function(a){a.preventDefault(a);var e=formControls(this),n=formLock(this);$("#pheader").html(jsrender($("#rd-prtaq"),e,l)),socket.sendMessage("reporte-banca",{s:e,g:c.val()},function(a,e){formLock(n,!1),o=e||[],t()})}),e&&e.length>0){var u=e[0].split("-"),d=e[1].split("-");r.datepicker("setDate",new Date(u[0],parseInt(u[1])-1,u[2])),s.datepicker("setDate",new Date(d[0],parseInt(d[1])-1,d[2])),i.trigger("submit")}}function reporteVentas_nav(a,e){function t(a,t){u.html(""),c=c.concat(t),t.hasOwnProperty("code")&&(d.html(jsrender($("#rd-taquillal-option"),c)),e.length>=2&&(d.select2("val",e[1]),$("#reporte").trigger("submit")))}function n(){b.html(""),D.html(""),$(".es-reset").html("--"),k=1,O=0}function o(a,e){e.data&&(i.push(e.data),I=I.concat(e.data),s(e.data),D.append('<button class="btn btn-default nav-btn">'+ ++k+"</button>")),e.last&&(socket.removeListener("reporte-ventas",o),$(".nav-btn").click(function(){var a=$(this);O=parseInt(a.html())-1,a.hasClass("btn-default")&&($(".nav-btn").switchClass("btn-primary","btn-default"),a.switchClass("btn-default","btn-primary"),r(i[O]))}))}function r(a){b.html(jsrender($("#rd-reporte-diario"),a)),$(".fticket").click(function(){var a=$("#md-ticket"),e=$(this).data("id");a.on("shown.bs.modal",function(t){a.off("shown.bs.modal",arguments.callee);var n=$("#md-pagar-ticket");n.val(parseInt(e)),n.focus()}),a.modal("show")})}function s(a){a&&(a.forEach(function(a){0==a.a?(f+=a.m,m+=a.pg,p+=a.pr):(v++,g+=a.m)}),$("#mnt-jugado").html(f.format(2)),$("#mnt-premios").html(p.format(2)),$("#mnt-pagos").html(m.format(2)),$("#mnt-balance").html((f-p).format(2)),$("#mnt-pendiente").html((p-m).format(2)),$("#mnt-ppagos").html((m/p*100).format(2)),$("#mnt-tanulados").html(v.format(2)),$("#mnt-anulados").html(g.format(2)))}var i,c=[],l=$("#bancas"),u=$("#hb-taquilla"),d=$("#taquillas");socket.addListener("taquillas",t),l.html(jsrender($("#rd-usuario-option"),$bancas)),l.select2("val",0),l.on("change",function(){u.html('<i class="fa fa-spinner fa-spin"></i> Espere, recibiendo taquillas..'),socket.sendMessage("taquillas",{usuariol:l.val()})}),socket.sendMessage("taquillas",{usuariol:l.val()});var f=0,m=0,p=0,v=0,g=0,h=$("#reporte-fecha"),b=$("#reporte-body"),D=$("#nav-table"),I=[];$("#rpt-vpremio").click(function(){var a=I.filter(function(a){return a.pr>0});r(a),$(".nav-btn").addClass("disabled")}),$("#rpt-vjugado").click(function(){r(i[O]),$(".nav-btn").removeClass("disabled")}),$("#rpt-vanulado").click(function(){var a=I.filter(function(a){return a.a>0});r(a),$(".nav-btn").addClass("disabled")}),$("#rpt-vpend").click(function(){var a=I.filter(function(a){return a.pg<a.pr});r(a),$(".nav-btn").addClass("disabled")}),$("#rpt-vpagos").click(function(){var a=I.filter(function(a){return a.pg>0});r(a),$(".nav-btn").addClass("disabled")}),$("#reporte").submit(function(a){a.preventDefault(a),I.length=0,f=0,m=0,p=0,v=0,g=0;var e=formControls(this),t=formLock(this);n(),socket.sendMessage("reporte-ventas",e,function(a,e){formLock(t,!1),e.last||socket.addListener("reporte-ventas",o),I=I.concat(e.data),e.data&&(i=[e.data],s(e.data),r(e.data),D.html('<button class="btn btn-primary nav-btn">1</button>'))})});var k=1,O=0;if($("#print-reporte").click(function(){var a=new Date,e=[{type:"linea",text:$usuario.nombre,align:"center"},{type:"linea",text:a.format("yy-mm-dd")+" "+a.format("TZ:240 h:MM:s TT"),align:"center"},{type:"linea",text:"REPORTE TICKETS",align:"center"}];e.push({type:"linea",text:"JUGADO: "+f.format(2),align:"left"}),e.push({type:"linea",text:"PREMIOS: "+p.format(2),align:"left"}),e.push({type:"linea",text:"PAGOS: "+m.format(2),align:"left"}),e.push({type:"linea",text:"PENDIENTE: "+(p-m).format(2),align:"left"}),e.push({type:"linea",text:"BALANCE: "+(f-m).format(2),align:"left"}),e.push({type:"linea",text:" ",align:"left"}),print.sendMessage("print",{data:e,printer:1})}),e&&e.length>=1){var E=e[0].split("-");h.datepicker("setDate",new Date(E[0],parseInt(E[1])-1,E[2]))}}function reporteCobros_nav(a,e){function t(a){a.preventDefault(a);var e=$(this).attr("usID"),t=parseFloat($(this).attr("monto")),n="COBRO SRQ SEMANA"+o.val()+"|"+r.val()+" "+$(this).attr("desc");socket.sendMessage("balance-add",{usID:e,monto:t,desc:n,cdo:1},function(e,t){$("#rd"+t.usID).addClass("success"),$(a.target.parentElement).remove()})}var n,o=$("#reporte-fecha1"),r=$("#reporte-fecha2"),s=$("#reporte");if(_helpers.rgFiltro=function(){return o.val()&&r.val()?"|"+o.val()+"|"+r.val():""},s.submit(function(a){a.preventDefault(a);var e=[],o=formControls(this),r=formLock(this),s=$("#rp-agrupar").val();socket.sendMessage("reporte-cobros",{s:o,g:s},function(a,s){function i(){if(e.length>0){var a=e.shift(),n=copyTo(o);n.uid=a,socket.sendMessage("reporte-subcobros",{s:n,g:3},function(e,n){var o=0;n.forEach(function(e){e.uID=a,o+=e.jg*e.cm}),d+=o,$("#rnt"+a).html(o.format(2)),$("#recaudo").html(d.format(2)),$("#trenta").html((u*$usuario.comision).format(2));var r=jsrender($("#rd-reporte"),n);$(r).insertAfter("#rdu"+a),$(".cbr-shutdown").off("click"),$(".cbr-shutdown").click(function(a){var e;if(a.preventDefault(a),$(this).attr("banca")){e=parseInt($(this).attr("banca"));var t=findBy("uID",e,s),n=confirm("SEGURO DESEA SUSPENDER USUARIO "+t.desc);n&&socket.sendMessage("usuario-editar",{usuarioID:e,activo:0},function(a,e){1==e.code&&(e.hasOwnProperty("activa")&&(banca.activo=e.activo),notificacion("USUARIO SUSPENDIDO CON EXITO"))})}}),$("#cbrfi"+a).switchClass("fa-folder-o","fa-folder"),$(".cbr-bal").off("click"),$(".cbr-bal").on("click",t),i()})}}if(formLock(r,!1),!s)return $("#reporte-body").html(""),void $(".clr").html("--");n=s;var c,l,u=0,d=0;s.forEach(function(a){u+=a.jg,d+=a.jg*a.cm,a.hasOwnProperty("cm")&&(0==a.cm||null==a.cm)&&a.hasOwnProperty("uID")&&e.push(a.uID)}),i(),$("#mnt-jugado").html(u.format(2)),c=s.slice(),c.sort(function(a,e){return e.jg-a.jg}),l=c[0],$("#tj-banca").html(l.desc),$("#tj-jugada").html(l.jg.format(2)),$("#recaudo").html(d.format(2)),$("#trenta").html((u*$usuario.comision).format(2)),$("#reporte-body").html(jsrender($("#rd-reporte"),s)),$(".cbr-bal").on("click",t),$(".cbr-folder").click(function(a){a.preventDefault(a);var e=parseInt($(this).attr("fld"));$(this).attr("fld",1==e?0:1);var t=parseInt($(this).attr("fldid"));0==e?($(".subrow"+t).removeClass("hidden"),$(this).find("i").addClass("fa-folder-open")):($(".subrow"+t).addClass("hidden"),$(this).find("i").removeClass("fa-folder-open"))})})}),$("#rtp-desc-o").click(function(a){a.preventDefault(a),n.sort(function(a,e){var t=0;return a=a.desc.toLowerCase(),e=e.desc.toLowerCase(),a>e&&(t=1),a<e&&(t=-1),t}),$("#reporte-body").html(jsrender($("#rd-reporte"),n))}),$("#cbr-procesar").click(function(){function a(t){var n=$(t).attr("usID"),s=parseFloat($(t).attr("monto")),i=parseFloat($("#minValor").val()),c="COBRO SRQ "+o.val()+"|"+r.val()+", "+$(t).attr("desc");s<i&&(s=i,c="COBRO SRQ "+o.val()+"|"+r.val()+", "+$(t).attr("desc")+" *RENTA BASICA*");var l=parseFloat($("#descuento").val());l>0&&(c="COBRO SRQ "+o.val()+"|"+r.val()+", "+$(t).attr("desc")+" *TOTAL: "+s.toFixed(2)+" -"+l+"% DESCUENTO*",s-=s*l/100),socket.sendMessage("balance-add",{usID:n,monto:s,desc:c,cdo:1},function(t,n){$("#rd"+n.usID).addClass("success"),e.length>0?a(e.shift()):$("#cbr-procesar").prop("disabled",0)})}$(this).prop("disabled",1);var e=[];$(".cbr-bal").each(function(a,t){e.push(t)}),a(e.shift())}),e&&e.length>0){var i=e[0].split("-"),c=e[1].split("-");o.datepicker("setDate",new Date(i[0],parseInt(i[1])-1,i[2])),r.datepicker("setDate",new Date(c[0],parseInt(c[1])-1,c[2])),s.trigger("submit")}}function reporteBalance_nav(a,e){function t(){if(null!=$balance){$("#reporte-body").html(jsrender($("#rd-reporte-us"),$balance));for(var a=0;a<$balance.length;a++)if(1==$balance[a].c){$("#bl-my-total").html($balance[a].balance.format(2));break}$(".bl-pagar").click(n)}else $("#reporte-body").html(jsrender($("#rd-reporte-us"),[]))}function n(a){function n(a){var t=findBy("balID",a,e&&e.length>0?i:$balance);askme("PROCESAR PAGO #"+a,jsrender($("#rd-procesar-pago"),t),{ok:function(a){var e=-1*parseFloat(a.monto);return o("PAGO:"+a.id+" B:"+padding(a.origen,4)+"-"+padding(a.destino,4)+" R:"+a.recibo+" F:"+a.fecha,e,s.usID,1),!0}})}function r(a){var n=findBy("balID",a,e&&e.length>0?i:$balance);askme("PROCESAR PAGO #"+a,jsrender($("#rd-procesar-pago"),n),{ok:function(a){var e=-1*parseFloat(a.monto),o={desc:"PAGO:"+a.id+" B:"+padding(a.origen,4)+"-"+padding(a.destino,4)+" R:"+a.recibo+" F:"+a.fecha,monto:e,usID:n.usID,resID:$usuario.usuarioID};return socket.sendMessage("balance-pago",o,function(a,e){e.balance="--",e.c=0,$balance.unshift(e),t(),notificacion("PAGO ENVIADO EXITOSAMENTE")}),!0}})}a.preventDefault(a);var c=$(this).attr("pago"),l=$(this).attr("cliente");"1"===l?n(c):r(c)}function o(a,e,t,o){var r={desc:a,monto:e,usID:t,cdo:o||1};socket.sendMessage("balance-add",r,function(a,e){i.length>0?e.balance=e.monto+i[0].balance:e.balance=e.monto,e.c=e.cdo,i.unshift(e),$("#reporte-body-client").html(jsrender($("#rd-reporte-us"),i)),$("#bl-clients-total").html(e.balance.format(2)),$(".bl-pagar").click(n)})}function r(a){let e=$(a).closest(".gritter-item-wrapper");e.remove()}var s,i=[];if(e&&e.length>0)$(".bl-dreg").each(function(){$(this).removeClass("hidden")}),$(".bl-greg").each(function(){$(this).addClass("hidden")}),$("#bl-my").addClass("hidden"),socket.sendMessage("balance-us",{usID:e[0]},function(a,t){t.hasOwnProperty("code")?s={usID:e[0]}:(i=t.bl||[],i.forEach(a=>a.cliente=1),s=t.us,$("#bl-us-name").html(t.us.nombre),$("#reporte-body-client").html(jsrender($("#rd-reporte-us"),t.bl)),$("#bl-clients-total").html(t.bl[0].balance.format(2)),$("#bl-client-heading").trigger("click"),$(".bl-pagar").click(n))});else{var c,l;function u(a,e){socket.sendMessage("balance-pagos",{inicio:a,fin:e},function(a,e){e=e||[],$("#bl-pagos").html(jsrender($("#rd-reporte-pagos"),e));var t=0;e.forEach(function(a){t+=a.monto}),$("#bl-pagos-total").html(t.format(2)),d()})}function d(){socket.sendMessage("balance-ppagos",null,function(a,e){e=e||[],$("#bl-ppagos").html(jsrender($("#rd-reporte-pend"),e));var t=0;e.forEach(function(a){t+=a.monto}),$("#bl-ppagos-total").html(t.format(2)),$(".cf-pago").click(function(a){a.preventDefault(a);var t=$(this).attr("bid"),n=findBy("balID",t,e);askme("CONFIRMAR PAGO #"+n.balID,jsrender($("#rd-procesar-pendiente"),n),{ok:function(a){$("#cf-label").html("Espere.. confirmando pago.");var n=findBy("balID",t,e);a={bID:t,usID:n.usID,monto:a.monto,cdo:a.cdo};return socket.sendMessage("balance-confirmacion",a,function(a,e){$("#md-ask").modal("hide"),$("#cfpago"+t),g()}),!1}})})})}$(".bl-dreg").addClass("hidden"),$(".bl-greg").removeClass("hidden"),$("#bl-my").removeClass("hidden"),t(),g(),$("#bl-sort-desc").click(function(a){a.preventDefault(a);var e=parseInt($(this).attr("ord"));e=0==e?-1:e,$(this).attr("ord",-1*e),c.sort(function(a,t){return a.desc.toLowerCase()<t.desc.toLowerCase()?e:-1*e}),$("#reporte-body-client").html(jsrender($("#rd-reporte"),c))}),$("#bl-sort-monto").click(function(a){a.preventDefault(a);var e=parseInt($(this).attr("ord"));e=0==e?-1:e,$(this).attr("ord",-1*e),c.sort(function(a,t){return a.balance<t.balance?e:-1*e}),$("#reporte-body-client").html(jsrender($("#rd-reporte"),c))});var f=$(".toggle");function m(a){return"u"==a.usID.charAt(0)?3==a.activo:1==a.activo}function p(){if(null!=c){c=$config.balance.filtrar?l.filter(m):l,$("#reporte-body-client").html(jsrender($("#rd-reporte"),c));var a=0;c.forEach(function(e){a+=e.balance}),$("#bl-clients-total").html(a.format(2));var e=new Date,t=e.format();e.setTime(e.getTime()-602e6);var n=e.format();u(n,t),$("#desde").val(n),$("#hasta").val(t),$(".bl-suspender").click(v),$(".bl-usmenu").click(function(a){a.preventDefault(a);var e=$(this).attr("usID"),t=e[0],n=e.substr(1),o=findBy("usID",e,c),r=o.activo;let s=notificacion(`ACCIONES: ${o.desc.toUpperCase()}`,jsrender($("#rd-blmenu"),{usID:e,tipo:t,uID:n,activo:r}));$(`#gritter-item-${s} > div.gritter-item > div.gritter-without-image > p > a`).click(function(a){$(this).hasClass("bl-suspender")&&v(a);let e=$(this).closest(".gritter-item-wrapper");e.remove()})})}}function v(a){a.preventDefault(a);var e,t=$(a.currentTarget).attr("usID"),n=t[0],o=t.substr(1),s=confirm("Confirma desea suspender/restaurar usuario?");s&&($("#bl-us"+t).html('<i class="fa fa-spinner fa-spin"></i>'),"g"==n?(e=0==parseInt($(a.currentTarget).attr("usAc"))?1:0,socket.sendMessage("banca-editar",{bancaID:o,activa:e},(n,o)=>{r(a.currentTarget);var s=findBy("usID",t,c);1==o.code?(s.activo=e,p()):notificacion("ERROR","OCURRIO UN ERROR AL SUSPENDER A "+s.nombre)})):"u"==n&&(e=0==parseInt($(a.currentTarget).attr("usAc"))?3:0,socket.sendMessage("usuario-editar",{usuarioID:o,activo:e},(n,o)=>{r(a.currentTarget);var s=findBy("usID",t,c);1==o.code?(s.activo=e,p()):notificacion("ERROR","OCURRIO UN ERROR AL SUSPENDER A "+s.nombre)})))}function g(){socket.sendMessage("balance-clientes",null,function(a,e){l=e||[],c=l.filter(m),p()})}f.each(function(a){var e=$(this);e.toggles({text:{on:"SI",off:"NO"},on:$config.balance.filtrar,click:!0})}),f.on("toggle",function(a,e){$config.balance.filtrar=e,saveConfig(),p()})}$("#bl-remover-registro").click(function(){askme("REMOVER REGISTRO","Esta opcion le permite borrar el ultimo registro del balance, desea continuar?",{ok:function(a){return socket.sendMessage("balance-remover",{usID:s.usID},function(a,e){i.shift(),$("#reporte-body-client").html(jsrender($("#rd-reporte-us"),i)),i.length>0?$("#bl-clients-total").html(e.bl[0].balance.format(2)):$("#bl-clients-total").html("0.00")}),!0}})}),$("#bl-nuevo-registro").click(function(){askme("NUEVO REGISTRO",jsrender($("#rd-balance-nuevo")),{ok:function(a){o(a.desc,a.monto,s.usID)}})}),$("#bl-fpagos").submit(function(a){a.preventDefault(a);var e=formControls(this);u(e.inicio,e.fin)})}function mensajes_nav(a,e){let t=$mensajes.slice(0,10);$("#ms-totalConversaciones").html($mensajes.length),$("#sms-bandeja").html(jsrender($("#rd-sms"),t))}function smsNuevo_nav(a,e){let t=$("#destino");socket.sendMessage("chat-destinos",null,(a,e)=>{t.html(jsrender($("#rd-destino-option"),e||[]))}),$("#sms-form").submit(function(a){a.preventDefault(a);let e=formControls(this);socket.sendMessage("chat-nuevo",e,(a,e)=>{notificacion("Mensaje enviado")})})}function mensajesRecibidos_nav(a,e){socket.sendMessage("chat-recibidos",null,(a,e)=>{$("#ms-totalConversaciones").html(e.length),$("#sms-bandeja").html(jsrender($("#rd-sms"),e))})}function mensajesEnviados_nav(a,e){socket.sendMessage("chat-enviados",null,(a,e)=>{$("#ms-totalConversaciones").html(e.length),$("#sms-bandeja").html(jsrender($("#rd-sms"),e))})}function mensajesLeer_nav(a,e){function t(){$("#read-sms").html(jsrender($("#rd-sms-body"),o,r)),$("#origen-sms").html(n.nombre)}var n,o=[],r={recibido:function(a){return $usuario.usID==a?"col-xs-offset-3 alert-success":""},fecha:function(a){let e=a.split(" "),t=dateFormat(null,"dd/mm/yy");return t==e[0]&&e.shift(),e.join(" ")},markdown:function(a){let e,t=/\*([\w\S]+)\*/;for(;e=t.exec(a);)a=a.replace(e[0],`<strong>${e[1]}</strong>`);return a}};e.length>0?socket.sendMessage("chat-leer",{origen:e[0]},(a,e)=>{n=e.origen,o=e.mensajes.filter(a=>a).sort((a,e)=>a.mID-e.mID),t(),scrollIntoView(".msg-body")}):nav.url("#mensajes"),$("#sms-form").submit(function(a){a.preventDefault(a);let e=formControls(this);e.destino=n.usID,formLock(this,!0),socket.sendMessage("chat-nuevo",e,(a,n)=>{formReset(this),e.enviado=(new Date).toLocaleTimeString(),e.origen=$usuario.usID,o.push(e),t(),notificacion(a,"Mensaje enviado")})})}function conexiones_nav(a,e){function t(){n.html('<tr><td colspan="2"><i class="fa fa-spinner fa-spin"></i> Espere, cargando...</td></tr>'),socket.sendMessage("conexiones",null,function(a,e){n.html(jsrender($("#rd-conexiones"),e))})}var n=$("#con-table");setTimeout(t,3e3),$("#con-off").click(function(){var a=confirm("Esta funcion desconectara y desactivara todas las taquillas registradas");a&&socket.sendMessage("taquilla-panic",null,t)}),$("#con-view").click(t)}function bancasSuspender_nav(a,e){function t(){socket.sendMessage("usuario-grupos",{usuarioID:r.val()},function(a,e){i.html(jsrender($("#rd-grupo-option"),e)),i.select2("val","")})}function n(){socket.sendMessage("usuario-listaSuspender",null,function(a,e){e=e||[],e.sort(function(a,e){return a.c<e.c?-1:a.c>e.c?1:0}),o=e,s.html(jsrender($("#rd-cond-row"),e)),$(".sprem").click(function(a){a.preventDefault(a);var e=$(this).attr("usID"),t=confirm("SEGURO DESEA REMOVER ESTA CONDICION?");t&&socket.sendMessage("usuario-susprem",{sID:e},function(a,t){findBy("sID",e,o);$("#r"+e).remove()})}),i.select2("val","")})}var o=[],r=$("#sup-comer"),s=$("#cond-body"),i=$("#sup-banca");r.html(jsrender($("#rd-usuario-option"),$bancas)),r.change(function(){i.html("")}),r.select2("val","");var c=$("#nivel2"),l=!1;c.click(function(){l=$(this).is(":checked"),$(".nivel2").toggleClass("hidden"),l&&t()}),$("#suspnvo-form").submit(function(a){a.preventDefault(a);var e=formControls(this);l?(e.sID="g"+e.bID,delete e.bID):e.sID="u"+e.sID;var t=formLock(this);socket.sendMessage("usuario-suspnvo",e,function(a,e){formLock(t,!1),s.html(""),n()})}),n()}function usuario_nav(a,e){let t=$("#cambiarClave");t.submit(a=>{a.preventDefault(a);let e=formControls(t),n=$("#clave1").val(),o=$("#clave2").val();if(n!=o)return notificacion("CLAVES NO COINCIDEN","Las confirmacion de claves nuevas no coinciden, verifique e intente nuevamente.");socket.sendMessage("usuario",e,function(a,e){e.hasOwnProperty("ok")?(notificacion("CAMBIO DE CLAVE EXITOSO"),t.reset()):notificacion("ERROR",e.error)})})}nav.paginas.addListener(Navegador.ENTER,function(a,e){var t=jQuery(".mainpanel"),n=jQuery(document).height(),o=t.height();n>o&&t.height(n),$(".date").datepicker({dateFormat:"yy-mm-dd"}),$(".now").datepicker("setDate",new Date),$(".s2-elementos").html(jsrender($("#rd-elemento-option"),$elementos)),$(".s2-bancas").html(jsrender($("#rd-banca-option"),$bancas))}),nav.paginas.addListener(Navegador.COMPLETE,function(a,e){select2w($(".s2"),{allowClear:!0});var t=jQuery(".panel-heading");t.attr("title","Click para expandir y/o contraer panel"),t.click(function(a){var e=jQuery(this).find(".minimize"),t=e.closest(".panel");return e.hasClass("maximize")?(t.find(".panel-body, .panel-footer").slideDown(200),e.removeClass("maximize"),e.html("&minus;")):(t.find(".panel-body, .panel-footer").slideUp(200),e.addClass("maximize"),e.html("&plus;")),!1})}),nav.paginas.addListener("login",login_nav),nav.paginas.addListener("inicio",inicio_nav),nav.paginas.addListener("suspendido",suspendido_nav),nav.paginas.addListener("suspendido_pago",suspendidoPago_nav),nav.paginas.addListener("sorteos/monitor",sorteoMonitor_nav),nav.paginas.addListener("sorteos/buscar",sorteoBuscar_nav),nav.paginas.addListener("sorteos/publicar",sorteoPublicar_nav),nav.paginas.addListener("sorteos/premiar",sorteoPremiar_nav),nav.paginas.addListener("bancas/bancas",bancasBancas_nav),nav.paginas.addListener("bancas/banca",bancasBanca_nav),nav.paginas.addListener("bancas/permisos",bancasPermisos_nav),nav.paginas.addListener("bancas/grupo",bancasGrupo_nav),nav.paginas.addListener("bancas/taquilla",bancasTaquilla_nav),nav.paginas.addListener("bancas/transferir",bancasTransferir_nav),nav.paginas.addListener("bancas/topes",bancasTopes_nav),nav.paginas.addListener("reporte/general",reporteGeneral_nav),nav.paginas.addListener("reporte/banca",reporteBanca_nav),nav.paginas.addListener("reporte/recogedor",reporteRecogedor_nav),nav.paginas.addListener("reporte/taquilla",reporteTaquilla_nav),nav.paginas.addListener("reporte/grupo",reporteGrupo_nav),nav.paginas.addListener("reporte/ventas",reporteVentas_nav),nav.paginas.addListener("reporte/cobros",reporteCobros_nav),nav.paginas.addListener("reporte/balance",reporteBalance_nav),nav.paginas.addListener("mensajes",mensajes_nav),nav.paginas.addListener("mensaje/nuevo",smsNuevo_nav),nav.paginas.addListener("mensaje/recibidos",mensajesRecibidos_nav),nav.paginas.addListener("mensaje/enviados",mensajesEnviados_nav),nav.paginas.addListener("mensaje/chat",mensajesLeer_nav),nav.paginas.addListener("conexiones",conexiones_nav),nav.paginas.addListener("bancas/suspensiones",bancasSuspender_nav),nav.paginas.addListener("usuario",usuario_nav);